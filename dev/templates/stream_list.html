<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“º Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø«ÙˆØ«</title>
  <style>
    body { background-color: #111; color: white; font-family: sans-serif; text-align: center; }
    .stream-card { background: #222; margin: 1rem auto; padding: 1rem; border-radius: 10px; width: 60%; }
    input, select { padding: 0.5rem; margin: 0.5rem; }
    a { color: lightblue; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h2>ğŸ“¡ Ø§Ù„Ø¨Ø«ÙˆØ« Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>

  <form method="get" style="margin-bottom: 2rem;">
    <input type="text" name="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø«..." value="{{ request.GET.search }}">
    <select name="category">
      <option value="">ğŸ—‚ï¸ ÙƒÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>
      {% for cat in categories %}
        <option value="{{ cat.id }}" {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
          {{ cat.name }}
        </option>
      {% endfor %}
    </select>
    <button type="submit">ÙÙ„ØªØ±Ø©</button>
  </form>

  {% for stream in streams %}
    <div class="stream-card">
      <h3><a href="{% url 'watch_stream' stream.id %}">{{ stream.title }}</a></h3>
      <p>ğŸ—‚ï¸ Ø§Ù„ØªØµÙ†ÙŠÙ: {{ stream.category.name }}</p>
      <p>ğŸ”” Ø§Ù„Ø­Ø§Ù„Ø©:
        {% if stream.status == 'live' %}
          <span style="color:green;">Ù…Ø¨Ø§Ø´Ø±</span>
        {% elif stream.status == 'upcoming' %}
          <span style="color:blue;">Ù‚Ø§Ø¯Ù…</span>
        {% else %}
          <span style="color:gray;">Ø§Ù†ØªÙ‡Ù‰</span>
        {% endif %}
      </p>
    </div>
  {% empty %}
    <p>ğŸš« Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø«ÙˆØ« Ø­Ø§Ù„ÙŠØ§Ù‹</p>
  {% endfor %}

  <a href="{% url 'create_stream' %}">â• Ø¥Ø¶Ø§ÙØ© Ø¨Ø« Ø¬Ø¯ÙŠØ¯</a>
</body>
</html>
